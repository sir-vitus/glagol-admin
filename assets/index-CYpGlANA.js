import{j as e,G as a,T as l,r as p,M as m,a2 as u,c as y}from"./index-DgjVHpDC.js";import{a as b}from"./axios-DgiKQb-_.js";import{A as g}from"./Accordion-DgV5MChy.js";import{I as d,a as h}from"./IconCheck-D-eaH-OY.js";import"./index-Btov1xSy.js";function f({data:r}){return e.jsx(e.Fragment,{children:r.map((n,o)=>{const t=n.response??0,c=t===1?"green":t===2?"red":t===3?"yellow":"grey.800",s=t===1?e.jsx(d,{}):t===2?e.jsx(h,{}):t===3?e.jsx(d,{}):e.jsx(d,{}),i=e.jsxs(a,{container:!0,sx:{alignItems:"center",justifyContent:"space-between"},children:[e.jsx(a,{sx:{p:1},children:e.jsx(l,{variant:"subtitle1",sx:{color:c},children:s})}),e.jsx(a,{sx:{p:1},children:e.jsx(l,{variant:"body1",sx:{color:"grey.800"},children:n.name})}),e.jsx(a,{sx:{p:1},children:e.jsx(l,{variant:"body1",sx:{color:"grey.800"},children:n.comment})})]});return e.jsx("div",{children:i},o)})})}function w({data:r}){const n=t=>e.jsx(f,{data:t.performers}),o=()=>r.map((t,c)=>{const s=t.color==="red"?e.jsx(h,{}):e.jsx(d,{});return{title:e.jsxs(a,{container:!0,sx:{alignItems:"center",justifyContent:"space-between"},children:[e.jsx(a,{sx:{p:1},children:e.jsx(l,{variant:"subtitle1",sx:{color:t.color},children:s})}),e.jsx(a,{sx:{p:1},children:e.jsx(l,{variant:"body1",sx:{color:"grey.800"},children:t.name})})]}),id:c,content:n(t)}});return e.jsx(g,{data:o(),toggle:!0})}function C({shows:r}){const n=t=>e.jsx(w,{data:t.characters}),o=()=>r.map((t,c)=>{const s=t.color==="red"?e.jsx(h,{}):e.jsx(d,{});return{title:e.jsxs(a,{container:!0,sx:{alignItems:"center",justifyContent:"space-between"},children:[e.jsx(a,{sx:{p:1},children:e.jsx(l,{variant:"subtitle1",sx:{color:t.color},children:s})}),e.jsx(a,{sx:{p:1},children:e.jsx(l,{variant:"body2",sx:{color:"grey.800"},children:t.name})})]}),id:c,content:n(t)}});return e.jsx(g,{data:o(),toggle:!0})}function v({dates:r}){const n=t=>e.jsx(C,{shows:t.shows}),o=()=>r.map((t,c)=>{let s=new Date(t.date).toLocaleDateString();const i=t.shows.filter(x=>x.color==="green").length;return s+=" ("+i+")",{title:e.jsx(l,{variant:"subtitle1",sx:{color:"grey.800"},children:s}),id:c,content:n(t)}});return e.jsx(g,{data:o(),toggle:!0})}function T(){const[r,n]=p.useState([]),o=p.useCallback(async()=>{try{const s=await b.get("/shows/avail");n(s.data)}catch(s){console.log(s)}},[]);p.useEffect(()=>{o()},[o]);const t=()=>{},c=r.length?r[0].shows:[];return e.jsxs(m,{title:"Спектакли ("+c.length+")",children:[e.jsx(v,{dates:r}),e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f2f2f2"},children:[e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px"},children:"Спектакли"}),r.map(s=>e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px"},children:new Date(s.date).toDateString()}))]})}),e.jsx("tbody",{children:c.map((s,i)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:s.name}),r.map(j=>e.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:j.shows[i].color=="green"?e.jsx(u,{title:"Да",children:e.jsx(y,{"aria-label":"yes",onClick:t,children:e.jsx(d,{})})}):e.jsx(u,{title:j.shows[i].characters.filter(x=>x.color==="red").map(x=>x.name).join(", "),children:e.jsx(y,{"aria-label":"no",onClick:t,children:e.jsx(h,{})})})}))]},s.id))})]})]})}export{T as default};

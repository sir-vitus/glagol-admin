import{j as t,G as c,T as i,r as d,M as u}from"./index-DC03GztF.js";import{a as p}from"./axios-DgiKQb-_.js";import{A as j}from"./Accordion-BqeaWFg1.js";import{I as x,a as h}from"./IconCheck-ousdgtlU.js";import"./index-Btov1xSy.js";function m({data:s}){return t.jsx(t.Fragment,{children:s.map((n,o)=>{const e=n.response??0,r=e===1?"green":e===2?"red":e===3?"yellow":"grey.400",a=e===1?t.jsx(x,{}):e===2?t.jsx(h,{}):e===3?t.jsx(x,{}):t.jsx(x,{}),l=t.jsxs(c,{container:!0,sx:{alignItems:"center",justifyContent:"space-between"},children:[t.jsx(c,{sx:{p:1},children:t.jsx(i,{variant:"subtitle1",sx:{color:r},children:a})}),t.jsx(c,{sx:{p:1},children:t.jsx(i,{variant:"body1",sx:{color:"grey.800"},children:n.name})}),t.jsx(c,{sx:{p:1},children:t.jsx(i,{variant:"body1",sx:{color:"grey.800"},children:n.comment})})]});return t.jsx("div",{children:l},o)})})}function y({data:s}){const n=e=>t.jsx(m,{data:e.performers}),o=()=>s.map((e,r)=>{const a=e.color==="red"?t.jsx(h,{}):t.jsx(x,{});return{title:t.jsxs(c,{container:!0,sx:{alignItems:"center",justifyContent:"space-between"},children:[t.jsx(c,{sx:{p:1},children:t.jsx(i,{variant:"subtitle1",sx:{color:e.color},children:a})}),t.jsx(c,{sx:{p:1},children:t.jsx(i,{variant:"body1",sx:{color:"grey.800"},children:e.name})})]}),id:r,content:n(e)}});return t.jsx(j,{data:o(),toggle:!0})}function f({shows:s}){const n=e=>t.jsx(y,{data:e.characters}),o=()=>s.map((e,r)=>{const a=e.color==="red"?t.jsx(h,{}):t.jsx(x,{});return{title:t.jsxs(c,{container:!0,sx:{alignItems:"center",justifyContent:"space-between"},children:[t.jsx(c,{sx:{p:1},children:t.jsx(i,{variant:"subtitle1",sx:{color:e.color},children:a})}),t.jsx(c,{sx:{p:1},children:t.jsx(i,{variant:"body2",sx:{color:"grey.800"},children:e.name})})]}),id:r,content:n(e)}});return t.jsx(j,{data:o(),toggle:!0})}function w({dates:s}){const n=e=>t.jsx(f,{shows:e.shows}),o=()=>s.map((e,r)=>{let a=new Date(e.date).toLocaleDateString();const l=e.shows.filter(g=>g.color==="green").length;return a+=" ("+l+")",{title:t.jsx(i,{variant:"subtitle1",sx:{color:"grey.800"},children:a}),id:r,content:n(e)}});return t.jsx(j,{data:o(),toggle:!0})}function I(){const[s,n]=d.useState([]),o=d.useCallback(async()=>{try{const r=await p.get("/shows/avail");n(r.data)}catch(r){console.log(r)}},[]);d.useEffect(()=>{o()},[o]);const e=s.length?s[0].shows:[];return t.jsx(u,{title:"Спектакли ("+e.length+")",children:t.jsx(w,{dates:s})})}export{I as default};

import{r as d,u as k,a as A,j as e,I as S,O as I,b as D,c as P,G as h,F as L,T as r,L as x,B as a,A as B,d as F,e as W,S as o,f as M,D as z}from"./index-DrwOMKjX.js";import{V as T,a as H,C as O,A as V,b as E,c as G}from"./VisibilityOff-BdC4cRcv.js";import{C as R}from"./CustomFormControl-GsqY1bYJ.js";import{a as U}from"./index-Btov1xSy.js";const u=U.create({baseURL:"https://www.glagoltheatre.ru/api",validateStatus:s=>s>=200&&s<300||s===404});u.interceptors.request.use(async s=>{const n=localStorage.getItem("serviceToken");return n&&(s.headers.Authorization=`Bearer ${n}`),s},s=>Promise.reject(s));u.interceptors.response.use(s=>s,s=>(s.response.status===401&&!window.location.href.includes("/login")&&(window.location.pathname="/login"),Promise.reject(s.response&&s.response.data||"Wrong Services")));function q(){const[s,n]=d.useState(!0),{setAuth:p,authUser:m}=k(),g=A(),[i,j]=d.useState(!1),[c,w]=d.useState(""),f=()=>{j(!i)},b=t=>{t.preventDefault(),console.log("handleMouseDownPassword")},v=async t=>{t.preventDefault(),console.log(c);const C="/user/"+c,l=await u.get(C);console.log(l.status),l.status===200&&p(l.data),console.table(m),g("/",{replace:!0})},y=t=>{w(t.target.value)};return e.jsxs(e.Fragment,{children:[!1,e.jsxs(R,{fullWidth:!0,children:[e.jsx(S,{htmlFor:"outlined-adornment-password-login",children:"Пароль"}),e.jsx(I,{onChange:y,id:"outlined-adornment-password-login",type:i?"text":"password",value:c,name:"password",endAdornment:e.jsx(D,{position:"end",children:e.jsx(P,{"aria-label":"toggle password visibility",onClick:f,onMouseDown:b,edge:"end",size:"large",children:i?e.jsx(T,{}):e.jsx(H,{})})}),label:"Password"})]}),e.jsxs(h,{container:!0,sx:{alignItems:"center",justifyContent:"space-between"},children:[e.jsx(h,{children:e.jsx(L,{control:e.jsx(O,{checked:s,onChange:t=>n(t.target.checked),name:"checked",color:"primary"}),label:"Keep me logged in"})}),e.jsx(h,{children:e.jsx(r,{variant:"subtitle1",component:x,to:"#!",sx:{textDecoration:"none",color:"secondary.main"},children:"Forgot Password?"})})]}),e.jsx(a,{sx:{mt:2},children:e.jsx(B,{children:e.jsx(F,{color:"secondary",fullWidth:!0,size:"large",type:"submit",variant:"contained",onClick:v,children:"Sign In"})})})]})}function J(){const s=W(n=>n.breakpoints.down("md"));return e.jsx(V,{children:e.jsxs(o,{sx:{justifyContent:"flex-end",minHeight:"100vh"},children:[e.jsx(o,{sx:{justifyContent:"center",alignItems:"center",minHeight:"calc(100vh - 68px)"},children:e.jsx(a,{sx:{m:{xs:1,sm:3},mb:0},children:e.jsx(E,{children:e.jsxs(o,{sx:{alignItems:"center",justifyContent:"center",gap:2},children:[e.jsx(a,{sx:{mb:3},children:e.jsx(x,{to:"#","aria-label":"logo",children:e.jsx(M,{})})}),e.jsxs(o,{sx:{alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx(r,{variant:s?"h3":"h2",sx:{color:"secondary.main"},children:"Hi, Welcome Back"}),e.jsx(r,{variant:"caption",sx:{fontSize:"16px",textAlign:{xs:"center",md:"inherit"}},children:"Скажи, друг, и войди"})]}),e.jsx(a,{sx:{width:1},children:e.jsx(q,{})}),e.jsx(z,{sx:{width:1}}),e.jsx(o,{sx:{alignItems:"center"},children:e.jsx(r,{component:x,to:"/pages/register",variant:"subtitle1",sx:{textDecoration:"none"},children:"Don't have an account?"})})]})})})}),e.jsx(a,{sx:{px:3,my:3},children:e.jsx(G,{})})]})})}export{J as default};
